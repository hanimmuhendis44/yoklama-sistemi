<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IÄŸdÄ±r Ãœniversitesi - AkÄ±llÄ± Yoklama Sistemi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="auth-section">
    <div class="auth-card" id="role-card">
        <h2>ğŸ“ IÄŸdÄ±r Ãœniversitesi</h2>
        <p>Sisteme giriÅŸ yapmak istediÄŸiniz rolÃ¼ seÃ§in:</p>
        <button class="btn btn-primary" style="width:100%; margin-bottom:15px;" onclick="rolSec('ogretmen-login')">ğŸ‘©â€ğŸ« Ã–ÄRETMEN GÄ°RÄ°ÅÄ°</button>
        <button class="btn btn-success" style="width:100%;" onclick="rolSec('ogrenci')">ğŸ‘¨â€ğŸ“ Ã–ÄRENCÄ° GÄ°RÄ°ÅÄ°</button>
    </div>

    <div class="auth-card" id="login-card" style="display: none;">
        <h2>ğŸ‘©â€ğŸ« Ã–ÄŸretmen GiriÅŸi</h2>
        <p>LÃ¼tfen bilgilerinizi giriniz.</p>
        <input type="text" id="loginAd" placeholder="AD SOYAD" autocomplete="off">
        
        <div class="password-container">
            <input type="password" id="loginSifre" placeholder="ÅÄ°FRENÄ°ZÄ° GÄ°RÄ°NÄ°Z" autocomplete="new-password">
            <span class="toggle-password" onclick="sifreGosterGizle('loginSifre', this)">ğŸ‘ï¸</span>
        </div>
        
        <button class="btn btn-primary" style="width: 100%;" onclick="girisYap()">GÄ°RÄ°Å YAP</button>
        <span class="auth-switch" onclick="rolSec('ogretmen-kayit')">HesabÄ±n yok mu? Ãœye Ol</span><br>
        <span class="auth-switch" style="color:#7f8c8d; margin-top:10px;" onclick="rolSec('ana-menu')">â† Ana MenÃ¼ye DÃ¶n</span>
    </div>

    <div class="auth-card" id="register-card" style="display: none;">
        <h2>ğŸ“ Ã–ÄŸretmen KaydÄ±</h2>
        <p>Sisteme yeni Ã¶ÄŸretmen olarak katÄ±lÄ±n.</p>
        <input type="text" id="regAd" placeholder="AD SOYAD" autocomplete="off">
        
        <div class="password-container">
            <input type="password" id="regSifre" placeholder="BÄ°R ÅÄ°FRE BELÄ°RLEYÄ°NÄ°Z" autocomplete="new-password">
            <span class="toggle-password" onclick="sifreGosterGizle('regSifre', this)">ğŸ‘ï¸</span>
        </div>
        
        <button class="btn btn-success" style="width: 100%;" onclick="uyeOl()">ÃœYE OL</button>
        <span class="auth-switch" onclick="rolSec('ogretmen-login')">Zaten Ã¼ye misin? GiriÅŸ Yap</span>
    </div>

    <div class="auth-card" id="student-card" style="display: none;">
        <h2>ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci Yoklama GiriÅŸi</h2>
        <p>Bilgilerinizi girip hocanÄ±n tahtaya yansÄ±ttÄ±ÄŸÄ± QR kodu okutun.</p>
        <input type="text" id="stAd" placeholder="Ã–RN: SÄ°NEM KILIÃ‡" autocomplete="off" oninput="this.value = this.value.toUpperCase()">
        <input type="text" id="stNo" placeholder="Ã–RN: 2400000000" maxlength="10" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
        
        <button id="btn-qr-ac" class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="ogrenciKameraAc()">ğŸ“· QR OKUT</button>
        <button id="btn-qr-kapat" class="btn btn-danger" style="width: 100%; margin-bottom: 10px; display: none;" onclick="ogrenciKameraKapat()">ğŸ›‘ KAMERAYI KAPAT</button>
        
        <div id="student-reader"></div>
        <div id="student-msg" style="margin-top: 15px; font-weight: bold; font-size: 16px;"></div>
        
        <span class="auth-switch" style="color:#7f8c8d; margin-top:20px;" onclick="rolSec('ana-menu')">â† Ana MenÃ¼ye DÃ¶n</span>
    </div>
</div>

<div id="app-section">
    <nav class="top-nav">
        <div class="brand-title">ğŸ‘©â€ğŸ« Ã–ÄŸretmen Paneli <span id="teacher-name" style="font-size: 14px; font-weight: normal; margin-left:10px;"></span></div>
        <div class="nav-buttons">
            <button id="btn-yonetim" class="nav-btn active" onclick="panelAc('panel-yonetim')">ğŸ‘¤ YÃ¶netim</button>
            <button id="btn-yoklama" class="nav-btn" onclick="panelAc('panel-yoklama')">ğŸ“² QR Yoklama</button>
            <button id="btn-devam" class="nav-btn" onclick="panelAc('panel-devam')">ğŸ“Š Ã‡izelge</button>
            <button class="nav-btn" style="background: var(--danger);" onclick="cikisYap()">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
        </div>
    </nav>

    <div class="course-tabs-container">
        <button class="btn-add-course" onclick="yeniDersEkle()">â• Ders Ekle</button>
        <div id="course-list" style="display: flex; gap: 10px;"></div>
    </div>

    <div class="main-container">
        <div id="no-course-warning" style="text-align: center; margin-top: 50px; color: #7f8c8d; font-size: 18px;">
            LÃ¼tfen yukarÄ±dan bir ders seÃ§in veya "Ders Ekle" butonuna basÄ±n.
        </div>

        <div id="course-content" style="display: none;">
            <section id="panel-yonetim" class="panel active">
                <h2 class="panel-title">ğŸ‘¤ Ã–ÄŸrenci Listesi YÃ¶netimi</h2>
                <div class="input-group">
                    <input type="text" id="inAd" placeholder="Ã–RN: SÄ°NEM KILIÃ‡" autocomplete="off" oninput="this.value = this.value.toUpperCase()">
                    <input type="text" id="inNo" placeholder="Ã–RN: 2400000000" maxlength="10" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                </div>
                <div class="action-bar">
                    <button class="btn btn-success" onclick="ogrenciEkle()">â• Ekle</button>
                    <button class="btn btn-warning" onclick="ogrenciDuzenle()">âœï¸ DÃ¼zenle</button>
                    <button class="btn btn-danger" onclick="ogrenciSil()">ğŸ—‘ï¸ Sil</button>
                    <button class="btn btn-secondary" style="margin-left: auto;" onclick="document.getElementById('fileIn').click()">ğŸ“‚ PDF YÃ¼kle</button>
                    <input type="file" id="fileIn" hidden accept=".pdf,.txt" onchange="dosyaSÃ¼z(event)">
                </div>
                <table>
                    <thead><tr><th style="width: 50px;">#</th><th>Ad Soyad</th><th>Ã–ÄŸrenci NumarasÄ±</th></tr></thead>
                    <tbody id="list-yonetim"></tbody>
                </table>
            </section>

            <section id="panel-yoklama" class="panel">
                <h2 style="justify-content: center;" class="panel-title">ğŸ“² SÄ±nÄ±f QR Kodu</h2>
                <div class="action-bar" style="justify-content: center;">
                    <button class="btn btn-primary" onclick="yeniTarihEkle()">ğŸ—“ï¸ Ders Tarihi SeÃ§</button>
                    <button id="startBtn" class="btn btn-success" onclick="qrDongusunuBaslat()">â–¶ï¸ BaÅŸlat</button>
                    <button id="stopBtn" class="btn btn-danger" style="display:none;" onclick="qrDongusunuDurdur()">ğŸ›‘ Bitir</button>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
                    <div id="qrcode" style="padding: 15px; background: white; border: 4px solid var(--secondary); border-radius: 12px; min-height: 200px; min-width: 200px;"></div>
                    <div id="progress-container" style="width: 250px; height: 10px; background: #eee; border-radius: 5px; margin-top: 15px; overflow: hidden;">
                        <div id="progress-bar" style="width: 100%; height: 100%; background: var(--primary);"></div>
                    </div>
                    <div id="session-timer" class="timer-display">SÃœRE: 00:00</div>
                </div>
            </section>

            <section id="panel-devam" class="panel">
                <h2 class="panel-title">
                    <span>ğŸ“Š Yoklama Durumu <span style="font-size: 13px; color: #7f8c8d;">(Manuel iÃ§in etiketlere tÄ±klayÄ±n)</span></span>
                    <button class="btn btn-primary" onclick="cizelgeyiPdfIndir()">ğŸ“¥ Ä°ndir (PDF)</button>
                </h2>
                <div style="overflow-x: auto;" id="pdf-alani">
                    <table id="devam-tablo"><thead id="h-devam"></thead><tbody id="b-devam"></tbody></table>
                </div>
            </section>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
